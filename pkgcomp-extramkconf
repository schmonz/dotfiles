# settings common to all pkgsrc builds, whether done by
# - pkg_comp(8)
# - a one-off built directly in pkgsrc

_LOGICALBASE=		/usr/pkg		# symlink points to LOCALBASE
_LOCALPATH=		/usr/.pkg-		# LOCALBASE is here somewhere

.if !defined(VINTAGE)
VINTAGE!=		( readlink -f ${_LOGICALBASE} \
				| sed -e 's|^${_LOCALPATH}||' )
.endif

_PHYSICALBASE=		${_LOCALPATH}${VINTAGE}
LOCALBASE=		${_PHYSICALBASE}

PKG_DBDIR=		${LOCALBASE}/.pkgdb

.if !empty(.CURDIR:M*sysutils/checkpassword)
SPECIAL_PERMS+=		bin/checkpassword ${ROOT_USER} ${ROOT_GROUP} 4755
.endif

# XXX schmonz 20140809:
# mail/isync/1.1.0 with security/openssl/1.0.1h fails with system gcc 4.5.3
#.if !empty(.CURDIR:M*mail/isync)
#USE_PKGSRC_GCC=		yes
#USE_PKGSRC_GCC_RUNTIME=	yes
#GCC_REQD=		4.7.0
#PKGSRC_COMPILER=	gcc
#.endif

#ACCEPTABLE_LICENSES+=	gnu-gpl-v3 lame-license artistic-2.0
ACCEPTABLE_LICENSES+=	djb-nonlicense hydra-license php-license vim-license
ACCEPTABLE_LICENSES+=	erlang-public-license

ALLOW_VULNERABLE_PACKAGES=	# defined

LOCALPATCHES=		${PKGSRCDIR}/localpatches

.if defined(MASTER_SITES) && ${MASTER_SITES:M*https\:*}
FETCH_USING?=		curl
.endif

PKGSRC_KEEP_BIN_PKGS=	yes

#PREFER_PKGSRC=		openssl
#USE_BUILTIN.resolv=	yes
#X11_TYPE=		modular

PKG_DEFAULT_OPTIONS=	ssl tls -inet6 -sasl -x11 -fam -kerberos -gssapi
PKG_OPTIONS.apache+=	suexec
PKG_OPTIONS.apcupsd+=	cgi -snmp
PKG_OPTIONS.djbdns+=	djbdns-ignoreip2
PKG_OPTIONS.graphviz+=	-gtk -pangocairo -lua -perl -tcl
PKG_OPTIONS.ikiwiki+=	git ikiwiki-search
PKG_OPTIONS.maildrop+=	-authlib
PKG_OPTIONS.mencoder+=	-cdparanoia -dv -dvdread -gif -lame -mad -mplayer-real \
			-mplayer-runtime-cpudetection -png -theora -vorbis \
			-mplayer-win32
			# maybe dv is a good idea
#PKG_OPTIONS.mencoder+=	-jpeg -x264 -xvid
PKG_OPTIONS.mutt+=	mutt-hcache mutt-smtp sasl # mutt-sidebar
PKG_OPTIONS.netatalk+=	slp
PKG_OPTIONS.pari+=	-doc
#PKG_OPTIONS.perl+=	-threads
#PKG_OPTIONS.php+=	suhosin
PKG_OPTIONS.php55+=	readline
PKG_OPTIONS.roundcube+=	sqlite
PKG_OPTIONS.qmail+=	qmail-netqmail qmail-bigdns qmail-realrcptto
PKG_OPTIONS.qmail+=	qmail-viruscan syncdir -tls
#PKG_OPTIONS.rt+=	modperl2
PKG_OPTIONS.spamdyke+=	-tls
#PKG_OPTIONS.stunnel+=	-pthread -libwrap
PKG_OPTIONS.ucspi-tcp+=	-inet6
PKG_OPTIONS.p5-Authen-SASL+=	-gssapi

PKG_GID.qmail=		1002
PKG_GID.nofiles=	1001
PKG_UID.alias=		1006
PKG_UID.qmaild=		1007
PKG_UID.qmaill=		1008
PKG_UID.qmailp=		1009
PKG_UID.qmailq=		1010
PKG_UID.qmailr=		1011
PKG_UID.qmails=		1012

PKG_RCD_SCRIPTS=	yes
PKG_SYSCONFBASE=	/etc
PKG_DEVELOPER=		yes
CHECK_PERMS=		no

PHP_VERSION_DEFAULT=	55
PKG_APACHE_DEFAULT=	apache24
#PGSQL_VERSION_DEFAULT=	83	# preserved from chicken-ac
PYTHON_VERSION_DEFAULT=	34

APACHE_SUEXEC_DOCROOT=	/
PGHOME=			${VARBASE}/pgsql
QMAILDIR=		${LOCALBASE}/varqmail

PKGSRC_SETENV=		${SETENV} -i
